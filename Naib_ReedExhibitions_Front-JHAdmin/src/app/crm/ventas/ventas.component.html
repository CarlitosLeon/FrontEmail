<ng-container style="background: rgb(255, 255, 255);">
    <div class="example-container">
        <mat-toolbar class="example-toolbar modal-header-naib" style=" height: 55px;">

            <div class="nav-link text-white" (click)="opciones.toggle()"><i class="fas fa-bars"></i></div>
            <span class="text-white font-italic" style="font-size: 18px;"> Asignar / Reubicar Stand</span>
            <span class="example-spacer"></span>
            <div>
                <a class="btn btn-xs btn-light text-dark" (click)="snav.toggle()">
                    <i class="fas fa-address-book"></i> Mis Clientes</a>
            </div>
        </mat-toolbar>
        <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="square-loader" [fullScreen]="true">
            <p style="color: white" class="pt-2"> Loading... </p>
        </ngx-spinner>
        <mat-sidenav-container class="example-sidenav-container" [hasBackdrop]="false">
            <mat-sidenav #snav fixedTopGap="56" position="end" mode="side" style=" background-color:#d1ecf1;"
                [(opened)]="opened" (closed)="changeView()">
                <aside class="elevation-2" style="width: 300px; height: 100%; background-color:#effeff;">
                    <div class="card-body">
                        <div class="form-inline">
                            <button class="btn btn-xs btn-primary" style="width: 120px;" (click)="chargeGeneral()"><b><i
                                        class="fas fa-list-ol"></i> General</b> </button>

                            <button class="btn btn-xs btn-primary ml-3" style="width: 120px;"
                                matBadge="{{listaMisExpositoresEspera.length}}" matBadgeColor="warn"
                                (click)="chargeMovimiento()">
                                <b><i class="fas fa-exchange-alt"></i> Reubicación</b>
                            </button>
                        </div>
                        <div class="input-group input-group-sm mt-3">
                            <input type="search" class="form-control" placeholder="Buscar un cliente..."
                                aria-label="Search" style="font-size: 12px;" [(ngModel)]="buscadorGeneral"
                                (keyup)="mBuscadorGeneral($event)">
                            <div class="input-group-prepend rounded bg-info">
                                <mat-icon
                                    [ngClass]="{'text-warning': filtroMisClientes, 'text-white':!filtroMisClientes}"
                                    (click)="filtrarMisClientes()" class=" pt-1 pr-4" style="width:6px;">grade
                                </mat-icon>
                            </div>
                        </div>
                        <div class="mt-3 scrollerOsqi  bg-white rounded elevation-2" (mouseover)="activateFunction()">
                            <ul class="list-group">
                                <li class="list-group-item list-group-item-action col-lg-12 p-0 m-0 puntero"
                                    *ngFor="let item of listaSeleccionada" (click)="pickExpoFromSideList(item)">
                                    <div class="media p-2 shadow align-items-center"
                                        [ngClass]="{'borderExpositorPropio': item.vendedor.id==idVendedor, 'borderExpositorAjeno': item.vendedor.id!=idVendedor}">
                                        <!-- [matTooltip]="exp.expositor.nombre_comercial" matTooltipPosition="right"-->
                                        <img [src]="urlImgExp+item.expositor.logo" alt="Expositor"
                                            class="img-size-50  ml-1">
                                        <!--[src]="urlImgExp+exp.expositor.logo"-->
                                        <div class=" ml-1">
                                            <p class="m-0" style="width: 100%">
                                                <span class="float-right text-sm text-warning ml-1"><i
                                                        class="fas fa-star"
                                                        *ngIf="item.vendedor.id==idVendedor"></i></span>
                                                <span class="text-navy font-weight-bold text-sm">
                                                    {{item.expositor.nombre_comercial}}
                                                </span>
                                                <br>
                                                <span class="text-danger" style="font-size: 12px;"><i
                                                        class="fas fa-store text-dark">&nbsp;</i>
                                                    <span *ngFor="let stand of item.expositor.stands; let i = index">
                                                        <ng-container *ngIf="stand.status==1">
                                                            <span
                                                                (click)="ubicarStand(stand)">{{stand.numeroStand}}</span>
                                                            <span
                                                                *ngIf="item.expositor.stands.length > 1 && i < item.expositor.stands.length-1">
                                                                -
                                                            </span>
                                                        </ng-container>
                                                    </span>
                                                    <span class="font-italic text-secondary"
                                                        *ngIf="item.expositor.stands.length==0">
                                                        SIN STANDS
                                                    </span>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <ng-container *ngIf="busquedaisActive && listaSeleccionada.length==0">
                                    <div class="alert bg-gradient-lightblue shadow text-center m-3">
                                        <p style="width: 100%">
                                            <span class="text-sm">
                                                <i class="fas fa-question-circle fa-3x"></i> <br>
                                                No se encontraron resultados...
                                            </span>
                                        </p>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="filtroMisClientes && listaMisExpositores.length==0">
                                    <img src="./assets/ventas/img_proyect/sinexpositor.png" style="width:100%;"
                                        class="mt-2">
                                </ng-container>

                                <ng-container
                                    *ngIf="!filtroMisClientes && listaMisExpositores.length==0 && opcionSeleccionadaGR==1">
                                    <img src="./assets/ventas/img_proyect/sinexpositor.png" style="width:100%;"
                                        class="mt-2">
                                </ng-container>

                                <ng-container
                                    *ngIf="opcionSeleccionadaGR==1 && listaMisExpositoresEspera.length==0 && listaMisExpositores.length>0">
                                    <img src="./assets/img_project/excepciones/emptyInfo2.jpg" width="200px;"
                                        height="100%">
                                </ng-container>
                                <ng-container
                                    *ngIf="filtroMisClientes && listaMisExpositoresGeneral.length==0 && listaMisExpositoresEspera.length>0 && opcionSeleccionadaGR==0">
                                    <div class="alert alert-warning shadow text-center m-3"
                                        style="width:220px; background-color: #fff3cd; color: #856404;">
                                        <span><i class="fas fa-info-circle fa-3x"></i><br>
                                            <strong>
                                                Todos tus expositores estan en la lista de REUBICACIÓN
                                            </strong>
                                        </span>
                                    </div>
                                </ng-container>

                            </ul>

                        </div>
                    </div>
                </aside>

            </mat-sidenav>
            <mat-sidenav #opciones fixedTopGap="56" mode="side" (closed)="changeView()">
                <mat-nav-list>
                    <mat-accordion>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header style="width: 92%; margin-left: 4%; margin-right: 4px;">
                                <mat-panel-title>
                                    <img style="width: 40px;" src="./assets/img_project/ric.png" class="img-circle">
                                </mat-panel-title>
                                <mat-panel-description class="mt-2">
                                    <b>Juan Perez</b>
                                </mat-panel-description>
                            </mat-expansion-panel-header>
                            <mat-list>
                                <mat-list-item disabled>
                                    <a class=" nav-link text-left " style="font-size: 12px; ">
                                        <i class="fas fa-user-friends pr-1 "></i> Floor Manager
                                    </a>
                                    <hr class="m-0 ">
                                </mat-list-item>
                                <mat-divider></mat-divider>
                                <mat-list-item disabled>
                                    <a class="nav-link text-left " style="font-size: 12px; ">
                                        <i class="fas fa-store-alt pr-1 "></i> Zona 1
                                    </a>
                                    <hr class="m-0 ">
                                </mat-list-item>
                                <mat-divider></mat-divider>
                                <mat-list-item disabled>
                                    <a class="nav-link text-left " style="font-size: 12px; ">
                                        <i class="fas fa-phone pr-1 "></i> 55-45-78-92-52
                                    </a>
                                    <hr class="m-0 ">
                                </mat-list-item>
                                <mat-divider></mat-divider>
                                <mat-list-item disabled>
                                    <a class="nav-link text-left " style="font-size: 12px; ">
                                        <i class="fas fa-envelope pr-1 "></i> correo@mail.com
                                    </a>
                                    <hr class="m-0 ">
                                </mat-list-item>
                            </mat-list>
                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-nav-list>
                <mat-nav-list>
                    <a mat-list-item>
                        <select id="inputState " class="form-control form-control-sm ">
                            <option selected>Elige un Evento</option>
                            <option> ExpoFerretera</option>
                            <option>Expo Beauty</option>
                            <option>Expo ELA</option>
                        </select>
                    </a>
                </mat-nav-list>
                <mat-nav-list>
                    <mat-list-item style="color: #343A40;" [routerLink]="['/mapaVentas']"
                        routerLinkActive="bg-lightblue">
                        <i class="nav-icon fas fa-map-marker-alt pr-1"></i> Asignar/Reubicar Stand
                    </mat-list-item>
                    <mat-list-item style="color: #343A40;" [routerLink]="['/ventasCalendario']"
                        routerLinkActive="bg-lightblue">
                        <i class="nav-icon fas fa-calendar-alt pr-1"></i> Mi Calendario
                    </mat-list-item>
                    <mat-list-item style="color: #343A40;" [routerLink]="['/ventasProspectos']"
                        routerLinkActive="bg-lightblue">
                        <i class="nav-icon fas fa-address-book pr-1"></i> Mi Cartera
                    </mat-list-item>
                    <mat-list-item style="color: #343A40;" [routerLink]="['/ventasProspectos']"
                        routerLinkActive="bg-lightblue">
                        <i class="nav-icon fas fas fa-chart-line pr-1"></i> Reportes
                    </mat-list-item>
                </mat-nav-list>
                <mat-list-item class="text-dark bajar ">
                    <a class="nav-link puntero " (click)="logout()">
                        <i class="nav-icon fas fa-door-open "></i> Cerrar sesión
                    </a>
                </mat-list-item>
            </mat-sidenav>
            <mat-sidenav-content class="content-container-side">
                <ng-container *ngIf="expoInAsignacion==true">
                    <div class="row">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-8">
                            <div class="callout callout-success elevation-2 form-inline" style="width: 580px;">
                                <div class="mb-auto mt-auto "><img [src]="urlImgExp+selectedClient.expositor.logo"
                                        style="width: 35px;"></div>
                                <div class="h3 mt-auto mb-auto ml-3" style="font-size: 17px;">
                                    {{selectedClient.expositor.nombre_comercial}}</div>
                                <div class="ml-3 mb-auto mt-auto text-muted">Stands selecionados:</div>
                                <div class="mb-auto mt-auto ml-1 text-danger" style="font-size: 19px;">
                                    <b>{{totalOfSelectedStands}}</b>
                                </div>
                                <button class="btn btn-xs btn-primary ml-auto" (click)="confirmAsignarStandFromLista()">
                                    Reservar</button>
                                <button class="btn btn-xs btn-secondary ml-3" (click)="asignarStandFromLista()">
                                    Cancelar</button>
                            </div>
                        </div>
                        <div class="col-lg-2"></div>
                    </div>
                </ng-container>
                <div class="scroll-top" #canvasContainer id="canvasContainer" (click)="asignSelectedElement()"
                    (touchstart)="asignSelectedElement()">
                    <canvas id="canvas" #img style="display:inline-block"></canvas>
                    <div class="btn btn-sm elevation-1 ml-3 btn-flotante" (click)="toogleSimbologiaFunction()"> <i
                            class="fas fa-info-circle"></i> Simbología</div>
                    <div class="flotante" *ngIf="simOpen">
                        <div style="font-size: 12px;" class="border border-info elevation-2 rounded p-2">
                            <div class="form-inline">
                                <div class="rounded p-2 text-center elevation-2 text-white"
                                    style="background-color: #17a2b8; border: 1px solid black; width: 40px;">
                                    {{counterReserva}}</div>
                                <div class="ml-2">Reserva de stand</div>
                            </div>
                            <div class="form-inline mt-3">
                                <div class="rounded p-2 text-center elevation-2 text-white"
                                    style="background-color: #007bff; border: 1px solid black; width: 40px;">
                                    {{counterFirma}}</div>
                                <div class="ml-2">Esperando firma</div>
                            </div>
                            <div class="form-inline mt-3">
                                <div class="rounded p-2 text-center elevation-2 text-white"
                                    style="background-color: #28a745; border: 1px solid black; width: 40px;">
                                    {{counterConfirmado}}</div>
                                <div class="ml-2">Cliente confirmado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-sidenav-content>
        </mat-sidenav-container>



        <!--
        Modal-Map (Empty)
    -->
        <div class="modal fade" id='modalMap-Empty'>
            <div class="modal-dialog modal-lg ">
                <div class="modal-content">
                    <div class="modal-header bg-gradient-dark form-inline">
                        <div class="form-inline" style="font-size: 15px;"><i class="fas fa-store"></i> <b
                                class="ml-2">Stand #{{componenteSeleccionado.numeroStand}}</b></div>
                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <ng-container *ngIf="!noProspect">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="input-group input-group-sm mb-3 ml-auto">
                                        <input type="search" class="form-control form-control-sm"
                                            [(ngModel)]="bucadorModal" (keyup)="buscadorModal($event)"
                                            style="font-size: 12px;" placeholder="Buscar un cliente..."
                                            aria-label="Search">
                                        <div class="input-group-prepend rounded">
                                            <div class="input-group-text"><i class="fas fa-search"></i></div>
                                        </div>
                                    </div>
                                    <div
                                        class="table-responsive table-responsive-lg table-responsive-md table-responsive-sm scrollerOsqi03">
                                        <table class="table table-bordered table-hover table-sm small text-center"
                                            style="font-size: 11px;" *ngIf="listTabla.length!=0">
                                            <thead style="background-color: #4385ef;" class="text-white">
                                                <tr>
                                                    <td><i class="fas fa-id-badge"></i>Mis Clientes</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngFor="let item of listTabla">
                                                    <tr [ngClass]="{'bg-gray': item.expositor.clicked, 'bg-white':!item.expositor.clicked}"
                                                        (click)="pickExpositorFromList(item)">
                                                        <th [ngClass]="{'text-danger':item.vendedor.id!=idVendedor}">
                                                            {{item.expositor.nombre_comercial}}</th>
                                                    </tr>
                                                </ng-container>
                                            </tbody>
                                        </table>
                                        <div *ngIf="listTabla.length==0">

                                            <div class="alert bg-gradient-lightblue shadow text-center m-3">
                                                <p style="width: 100%">
                                                    <span class="text-sm">
                                                        <i class="fas fa-question-circle fa-3x"></i> <br>
                                                        No se encontraron resultados...
                                                    </span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 mt-4">
                                    <div class="callout callout-success bg-light elevation-2 mt-3">
                                        <div style="font-size: 12px;" *ngIf="selectedExpoFromTable!=null">Has
                                            seleccionado a:</div>
                                        <div class="row" *ngIf="selectedExpoFromTable!=null">
                                            <div class="col-lg-9" style="font-size: 11px;">
                                                <div class="mt-2"><b>
                                                        {{selectedExpoFromTable.expositor.nombre_comercial}}</b></div>
                                                <div><b> {{selectedExpoFromTable.expositor.razon_social}}</b></div>
                                                <div><b> {{selectedExpoFromTable.expositor.telefono}}</b></div>
                                                <div><b> {{selectedExpoFromTable.expositor.email}}</b></div>
                                            </div>
                                            <div class="col-3 text-center mt-2"><img
                                                    [src]="urlImgExp+selectedExpoFromTable.expositor.logo"
                                                    style="width: 55px;"></div>
                                        </div>
                                        <div *ngIf="selectedExpoFromTable==null">
                                            <p><b>Seleccione un expositor</b></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="noProspect">
                            <div class="row text-center">
                                <div class="col-lg-2"></div>
                                <div class="col-lg-8">
                                    <img src="./assets/ventas/img_proyect/sinexpositor.png" class="text-center"
                                        style="width: 100px;">
                                </div>
                                <div class="col-lg-2"></div>
                            </div>
                            <div class="row text-center mt-4">
                                <div class="col-lg-2"></div>
                                <div class="col-lg-8">
                                    <div class="alert alert-warning shadow text-center"
                                        style="width:100%; background-color: #fff3cd; color: #856404; ">
                                        <span><i class="fas fa-info-circle fa-2x"></i><br>
                                            A&uacute;n no tienes clientes en el estatus
                                            <strong>
                                                POSIBLE CLIENTE
                                            </strong>
                                            o superior.
                                        </span>
                                    </div>
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                        </ng-container>
                    </div>
                    <div class="modal-footer">
                        <ng-container *ngIf="!noProspect">
                            <button class="btn btn-xs btn-primary" style="width: 120px;"
                                (click)="asignarStandFromMapa()">Reservar </button>
                        </ng-container>
                        <button class="btn btn-xs btn-danger ml-3" style="width: 120px;" data-dismiss="modal">Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </div>


        <!--
    Modal-Map (Fill)
    -->
        <div class="modal fade" id="modalMap-Fill">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">

                    <div class="modal-header bg-dark form-inline">
                        <div class="form-inline" style="font-size: 15px;"><i class="fas fa-store"></i>
                            <b class="ml-2">Stand #{{componenteSeleccionado.numeroStand}}</b>
                        </div>
                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="text-muted text-rigth" style="font-size: 15px;"><b>Cliente asignado:</b></div>
                        <ng-container *ngIf="selectedClientFromMap!=null">
                            <div class="row mt-3">
                                <div class="col-lg-2"></div>
                                <div class="col-lg-8">
                                    <div class="callout bg-light callout-success elevation-2 mt-3 ">
                                        <div class="row">
                                            <div class="col-6" style="font-size: 12px;">
                                                <div class="mt-2">
                                                    <b>{{selectedClientFromMap.expositor.nombre_comercial}}</b>
                                                </div>
                                                <div><b> {{selectedClientFromMap.expositor.razon_social}}</b></div>
                                                <div><b> {{selectedClientFromMap.expositor.telefono}}</b></div>
                                                <div><b> {{selectedClientFromMap.expositor.email}}</b></div>
                                            </div>
                                            <div class="col-lg-6 mt-2 text-right">
                                                <img [src]="urlImgExp+selectedClientFromMap.expositor.logo"
                                                    style="width: 100px;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-2"></div>
                            </div>
                            <hr>
                            <mat-tab-group>
                                <mat-tab>
                                    <ng-template mat-tab-label active class="active">
                                        <mat-icon class="pr-2">storefront</mat-icon>
                                        Stands reservados
                                    </ng-template>
                                    <div class="col-12">
                                        <!--
                                        <div class="mt-3 text-muted" style="font-size: 9px;">
                                            <div class="dropright ml-3">
                                                <button mat-stroked-button class="dropdown-toggle btn-light btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    <span><i class="fas fa-question-circle 2x"></i></span>
                                                </button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item disabled txt-legend"><i
                                                            class="fas fa-square text-info"></i>
                                                            Reserva de Stand</a>
                                                    <a class="dropdown-item disabled txt-legend"><i class="fas fa-square text-primary"></i>
                                                        Esperando Firma</a>
                                                    <a class="dropdown-item disabled txt-legend"><i class="fas fa-square text-success"></i>
                                                            Expositor Confirmado</a>
                                                </div>
                                            </div>
                                        </div>
                                    -->

                                        <div class="text-dark text-center mt-2"
                                            *ngIf="idVendedor!=selectedClientFromMap.vendedor.id"><b>Vendedor: <u>
                                                    {{selectedClient.vendedor.nombre}}
                                                    {{selectedClient.vendedor.aPaterno}}</u></b></div>
                                        <div class="row mt-3 text-center">
                                            <ng-container *ngIf="idVendedor==selectedClientFromMap.vendedor.id">
                                                <ng-container
                                                    *ngFor="let item of selectedClientFromMap.expositor.stands; let i=index;">
                                                    <ng-container *ngIf="item.status==1">
                                                        <div class="col-lg-2" *ngIf="i==0">&nbsp;</div>
                                                        <div class="col-lg-2 mt-1 ml-1" style="text-align: center;">
                                                            <select class="form-control form-control-sm text-white"
                                                                (input)="updatestatusStand(item, $event.target.value, 0)"
                                                                [ngClass]="{'bg-info': item.fill == colorReserva, 'bg-primary': item.fill == colorEsperando, 'bg-success': item.fill == colorConf}">
                                                                <option *ngFor="let proceso of estatusStands"
                                                                    value="{{proceso.valor}}"
                                                                    [selected]="proceso.estatus == item.fill">
                                                                    #{{item.numeroStand}} {{proceso.nombre}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-2" *ngIf="(i+1)%4==0 && i!=0">&nbsp;</div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>

                                            <ng-container *ngIf="idVendedor!=selectedClientFromMap.vendedor.id">
                                                <ng-container
                                                    *ngFor="let item of selectedClientFromMap.expositor.stands; let i=index;">
                                                    <ng-container *ngIf="item.status==1">
                                                        <div class="col-lg-2" *ngIf="i==0">&nbsp;</div>
                                                        <div class="col-lg-2 mt-1 ml-1 bg-success rounded border border-dark"
                                                            [ngClass]="{'bg-info': item.fill == colorReserva, 'bg-primary': item.fill == colorEsperando, 'bg-success': item.fill == colorConf}">
                                                            <b (click)="ubicarStand(item)">#{{item.numeroStand}}</b>
                                                        </div>
                                                        <div class="col-lg-2" *ngIf="(i+1)%4==0 && i!=0">&nbsp;</div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>
                                        </div>
                                        <hr>
                                        <ng-container *ngIf="idVendedor==selectedClientFromMap.vendedor.id">
                                            <div class="row text-center">
                                                <div class="col-lg-3"></div>
                                                <div class="col-lg-6">
                                                    <div class="rounded bg-warning border border-dark p-1"
                                                        style="font-size: 13px;">
                                                        Selecciona para reubicar o cancelar la asignación
                                                    </div>
                                                </div>
                                                <div class="col-lg-3"></div>
                                            </div>
                                            <div class="text-center mt-3">
                                                <button class="btn btn-xs btn-outline-primary ml-3"
                                                    style="width: 120px;" (click)="togglePanel(1)">Poner en
                                                    Espera</button>
                                                <button class="btn btn-xs btn-outline-danger ml-3" style="width: 120px;"
                                                    (click)="togglePanel(2)">Cancelar Asignaci&oacute;n </button>
                                            </div>
                                            <br>
                                            <mat-expansion-panel [expanded]="panelOpenState" hideToggle
                                                [disabled]="!panelOpenState">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title class="text-center text-secondary"
                                                        *ngIf="!panelOpenState">
                                                        &nbsp;
                                                    </mat-panel-title>
                                                    <mat-panel-title class=" text-center mt-5" *ngIf="panelOpenState">
                                                        <div class="alert alert-warning" *ngIf="mensaje==1"
                                                            style="width:100%; background-color: #fff3cd; color: #856404;">
                                                            {{mensajeMover[0]}}<b>{{this.selectedClientFromMap.expositor.nombre_comercial}}</b><br>{{mensajeMover[1]}}
                                                        </div>
                                                        <div class="alert alert-danger" *ngIf="mensaje==2"
                                                            style="width:100%; background-color: #f8d7da; color: #721c24;">
                                                            {{mensajeCancelar[0]}}<b>{{this.selectedClientFromMap.expositor.nombre_comercial}}</b><br><b>{{mensajeCancelar[1]}}</b>
                                                        </div>
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>

                                                <div class="row mt-4">
                                                    <div class="col-lg-2"></div>
                                                    <div class="col-lg-8">
                                                        <div class="text-muted float-left mt-4"
                                                            style="font-size: 12px;"><b>Escribe el
                                                                motivo:</b></div>
                                                        <textarea [(ngModel)]="motivoCancel" class="form-control"
                                                            id="exampleFormControlTextarea1" rows="3"></textarea>
                                                    </div>
                                                    <div class="col-lg-2"></div>
                                                </div>
                                                <div class="text-center mt-3">
                                                    <button class="btn btn-xs btn-info ml-3" style="width: 120px;"
                                                        [disabled]="!motivoCancel"
                                                        (click)="moverCancelarStand()">Confirmar </button>
                                                </div>
                                            </mat-expansion-panel>
                                        </ng-container>

                                    </div>
                                </mat-tab>

                                <mat-tab>
                                    <ng-template mat-tab-label>
                                        <mat-icon class="pr-2">history_toggle_off</mat-icon>
                                        Historial del expositor
                                    </ng-template>
                                    <div class="col-12 scrollerHistorial2" *ngIf="!vLoadingHEH">
                                        <div class="card bg-light elevation-1 mt-2">
                                            <div class="card-body scrollHisEH" *ngIf="histotialExpH.length > 0">
                                                <div class="timeline">
                                                    <div>
                                                        <i class="fas fa-clock bg-gray"></i>
                                                    </div>
                                                    <br><br>
                                                    <div *ngFor="let hExpH of histotialExpH">
                                                        <i class="fas" [ngClass]="{'fa-check-circle bg-success': hExpH.tipo == '6',
                                                         'fa-user-clock bg-warning': hExpH.tipo == '7',
                                                         'fa-user-check bg-primary': hExpH.tipo == '8',
                                                         'fa-exchange-alt bg-info': hExpH.tipo == '9',
                                                         'fa-ban bg-danger': hExpH.tipo == '10'}"></i>
                                                        <div class=" timeline-item shadow">
                                                            <span class="time"> <i class="fas fa-calendar-alt"></i>
                                                                {{hExpH.fecha_hora | date: 'dd/MM/yyyy'}} <i
                                                                    class="fas fa-clock pl-1"></i> {{hExpH.fecha_hora |
                                                                date:
                                                                'hh:mm aa'}}</span>
                                                            <div class=" timeline-header" style="font-size: 14px;">
                                                                <span [ngSwitch]="hExpH.tipo">
                                                                    <span *ngSwitchCase="'6'">
                                                                        El expositor reservo el Stand <strong
                                                                            class="text-navy">{{hExpH.accion}}</strong>.
                                                                    </span>
                                                                    <span *ngSwitchCase="'7'">
                                                                        Esperando firma del Expositor para el Stand
                                                                        <strong
                                                                            class="text-navy">{{hExpH.accion}}</strong>.
                                                                    </span>
                                                                    <span *ngSwitchCase="'8'">
                                                                        El Expositor ha confirmado el Stand <strong
                                                                            class="text-navy">{{hExpH.accion}}</strong>.
                                                                    </span>
                                                                    <span *ngSwitchCase="'9'">
                                                                        El Expositor ha sido mandado al área de
                                                                        Reubicacion por el Stand <strong
                                                                            class="text-navy">{{hExpH.accion}}</strong>.<br>
                                                                        <span class="text-navy">Motivo:
                                                                        </span>{{hExpH.descripcion}}
                                                                    </span>
                                                                    <span *ngSwitchCase="'10'">
                                                                        El Expositor ha cancelado el Stand <strong
                                                                            class="text-navy">{{hExpH.accion}}</strong>.<br>
                                                                        <span class="text-navy">Motivo:
                                                                        </span>{{hExpH.descripcion}}
                                                                    </span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div>
                                                        <i class="fas fa-clock bg-gray"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-center" *ngIf="histotialExpH.length == 0">
                                                <div class="">
                                                    <img src="./assets/ventas/img_proyect/SinHistorial.png">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 pt-3" *ngIf="vLoadingHEH">
                                        <section class="text-center">
                                            <div>
                                                <div class="spinner-border text-primary"
                                                    style="width: 3rem; height: 3rem;">
                                                    <div class="sr-only" role="status">
                                                        <span class="sr-only">Loading...</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="text-primary h5">Cargando...</span>
                                        </section>
                                    </div>
                                </mat-tab>
                            </mat-tab-group>

                        </ng-container>
                    </div>
                </div>
            </div>
        </div>

        <!--
        Modal-List
        -->
        <div class="modal fade" id="modalList">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header bg-dark form-inline">
                        <div class="row text-center" style="font-size: 15px;">
                            <div class="col-lg-2">
                                <div class=" rounded ">
                                    <img [src]="urlImgExp+selectedClient.expositor.logo" style="width: 40px;">
                                </div>
                            </div>
                            <div class="col-lg-9 form-inline " style="font-size: 13px;">
                                <div class=""><b>&nbsp;{{selectedClient.expositor.nombre_comercial}} </b></div>
                                <div class=" ml-2">{{selectedClient.expositor.razon_social}} </div>
                                <div class="">&nbsp;{{selectedClient.expositor.telefono}} /
                                    {{selectedClient.expositor.email}} </div>
                            </div>
                        </div>
                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <mat-tab-group>
                            <mat-tab>
                                <ng-template mat-tab-label active class="active">
                                    <mat-icon class="pr-2">storefront</mat-icon>
                                    Stands reservados
                                </ng-template>
                                <div class="col-12">
                                    <!--Case List Fill-->
                                    <div class="text-dark text-center mt-2"
                                        *ngIf="idVendedor!=selectedClient.vendedor.id"><b>Vendedor: <u>
                                                {{selectedClient.vendedor.nombre}}
                                                {{selectedClient.vendedor.aPaterno}}</u></b></div>

                                    <ng-container *ngIf="selectedClient.expositor.stands.length!=0">
                                        <div class="row mt-4">

                                            <ng-container *ngIf="idVendedor==selectedClient.vendedor.id">
                                                <ng-container
                                                    *ngFor="let item of selectedClient.expositor.stands; let i=index;">
                                                    <ng-container *ngIf="item.status==1">
                                                        <div class="col-lg-2" *ngIf="i==0">&nbsp;</div>
                                                        <div class="col-lg-2 mt-1 ml-1" style="text-align: center;">
                                                            <select [disabled]="idVendedor!=selectedClient.vendedor.id"
                                                                class="form-control form-control-sm text-white"
                                                                (input)="updatestatusStand(item, $event.target.value,1)"
                                                                [ngClass]="{'bg-info': item.fill == colorReserva, 'bg-primary': item.fill == colorEsperando, 'bg-success': item.fill == colorConf}">
                                                                <option *ngFor="let proceso of estatusStands"
                                                                    value="{{proceso.valor}}"
                                                                    [selected]="proceso.estatus == item.fill">
                                                                    #{{item.numeroStand}} {{proceso.nombre}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-2" *ngIf="(i+1)%4==0 && i!=0">&nbsp;</div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>

                                            <ng-container *ngIf="idVendedor!=selectedClient.vendedor.id">
                                                <ng-container
                                                    *ngFor="let item of selectedClient.expositor.stands; let i=index;">
                                                    <ng-container *ngIf="item.status==1">
                                                        <div class="col-lg-2" *ngIf="i==0">&nbsp;</div>
                                                        <div class="col-lg-2 ml-1 mt-1 bg-success rounded border border-dark"
                                                            [ngClass]="{'bg-info': item.fill == colorReserva, 'bg-primary': item.fill == colorEsperando, 'bg-success': item.fill == colorConf}">
                                                            <b>#{{item.numeroStand}}</b>
                                                        </div>
                                                        <div class="col-lg-2" *ngIf="(i+1)%4==0 && i!=0">&nbsp;</div>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>
                                        </div>
                                    </ng-container>

                                    <!--Case List Empty-->
                                    <ng-container *ngIf="selectedClient.expositor.stands.length==0">
                                        <div class="row text-center mt-5">
                                            <div class="col-lg-2"></div>
                                            <div class="col-lg-8">
                                                <img src="./assets/ventas/img_proyect/sinstands.png"
                                                    style="width: 330px;">
                                            </div>
                                            <div class="col-lg-2"></div>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngIf="idVendedor==selectedClient.vendedor.id">
                                        <hr>
                                        <div class="text-center">
                                            <button class="btn btn-xs btn-primary" style="width: 150px;"
                                                data-dismiss="modal" (click)="asignarStandFromLista()">Reservar nuevos
                                                Stands </button>
                                        </div>
                                    </ng-container>
                                    <hr>
                                </div>
                            </mat-tab>
                            <mat-tab>
                                <ng-template mat-tab-label>
                                    <mat-icon class="pr-2">history_toggle_off</mat-icon>
                                    Historial del expositor
                                </ng-template>
                                <div class="col-12 scrollerHistorial" *ngIf="!vLoadingHEH">
                                    <div class="card bg-light elevation-1 mt-2">
                                        <div class="card-body scrollHisEH" *ngIf="histotialExpH.length > 0">
                                            <div class="timeline">
                                                <div>
                                                    <i class="fas fa-clock bg-gray"></i>
                                                </div>
                                                <br><br>
                                                <div *ngFor="let hExpH of histotialExpH">
                                                    <i class="fas" [ngClass]="{'fa-check-circle bg-success': hExpH.tipo == '6',
                                                     'fa-user-clock bg-warning': hExpH.tipo == '7',
                                                     'fa-user-check bg-primary': hExpH.tipo == '8',
                                                     'fa-exchange-alt bg-info': hExpH.tipo == '9',
                                                     'fa-ban bg-danger': hExpH.tipo == '10'}"></i>
                                                    <div class=" timeline-item shadow">
                                                        <span class="time"> <i class="fas fa-calendar-alt"></i>
                                                            {{hExpH.fecha_hora | date: 'dd/MM/yyyy'}} <i
                                                                class="fas fa-clock pl-1"></i> {{hExpH.fecha_hora |
                                                            date:
                                                            'hh:mm aa'}}</span>
                                                        <div class=" timeline-header" style="font-size: 14px;">
                                                            <span [ngSwitch]="hExpH.tipo">
                                                                <span *ngSwitchCase="'6'">
                                                                    El expositor reservo el Stand <strong
                                                                        class="text-navy">{{hExpH.accion}}</strong>.
                                                                </span>
                                                                <span *ngSwitchCase="'7'">
                                                                    Esperando firma del Expositor para el Stand <strong
                                                                        class="text-navy">{{hExpH.accion}}</strong>.
                                                                </span>
                                                                <span *ngSwitchCase="'8'">
                                                                    El Expositor ha confirmado el Stand <strong
                                                                        class="text-navy">{{hExpH.accion}}</strong>.
                                                                </span>
                                                                <span *ngSwitchCase="'9'">
                                                                    El Expositor ha sido mandado al área de Reubicacion
                                                                    por el Stand <strong
                                                                        class="text-navy">{{hExpH.accion}}</strong>.<br>
                                                                    <span class="text-navy">Motivo:
                                                                    </span>{{hExpH.descripcion}}
                                                                </span>
                                                                <span *ngSwitchCase="'10'">
                                                                    El Expositor ha cancelado el Stand <strong
                                                                        class="text-navy">{{hExpH.accion}}</strong>.<br>
                                                                    <span class="text-navy">Motivo:
                                                                    </span>{{hExpH.descripcion}}
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <i class="fas fa-clock bg-gray"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-center" *ngIf="histotialExpH.length == 0">
                                            <div class="">
                                                <img src="./assets/ventas/img_proyect/SinHistorial.png">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 pt-3" *ngIf="vLoadingHEH">
                                    <section class="text-center">
                                        <div>
                                            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;">
                                                <div class="sr-only" role="status">
                                                    <span class="sr-only">Loading...</span>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="text-primary h5">Cargando...</span>
                                    </section>
                                </div>
                            </mat-tab>
                        </mat-tab-group>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="visibility: hidden; position: fixed;" [style.left]="menuTopLeftPosition.x"
        [style.top]="menuTopLeftPosition.y" [matMenuTriggerFor]="rightMenu"></div>

    <!-- standard material menu -->
    <mat-menu #rightMenu="matMenu">
        <ng-template matMenuContent let-ctxItem="item">
            <div>
                <a mat-menu-item [matMenuTriggerFor]="stands" (click)="btn(ctxItem)"
                    [disabled]="ctxItem.expositor.stands.length==0">
                    <mat-icon style="width:6px;">room</mat-icon>Ubicar Stand(s)

                    <mat-menu #stands="matMenu">
                        <a mat-menu-item *ngFor="let st of ctxItem.expositor.stands"
                            (click)="ubicarStand(st)">{{st.numeroStand}}</a>
                    </mat-menu>

                </a>
            </div>
        </ng-template>
    </mat-menu>

</ng-container>