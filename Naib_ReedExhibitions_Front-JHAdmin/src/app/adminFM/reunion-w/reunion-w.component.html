<div style="font-family: Segoe UI Emoji">
  <div class="wrapper">
    <app-menu-fm></app-menu-fm>
    <div class="content-wrapper">
      <div class="wrapper">
        <div class="container-fluid">
          <!--primer div-->
          

          <form [formGroup]="formWhats">
            <div class="content-wrapper bg-light">
              <div class="container">
                <div class="card mt-6">
                  <div class="card-header card-outline card-primary">
                    <div class="text-muted text-center" style="font-size: 11px">
                      Crea una Reunión
                    </div>
                    <div class="row mt-5">
                      <div class="col-lg-12">
                        <div class="row">
                          <div class="col-6">
                            <div class="input-group text-center">
                              <div class="input-group-prepend">
                                <div class="input-group-text">
                                  <i class="fas fa-id-badge"></i>
                                </div>
                              </div>
                              <input
                                type="text"
                                class="form-control"
                                formControlName="alias_Reunion"
                                placeholder="Alias de Reunión"
                                [ngClass]="{
                                  'is-invalid':
                                    formWhats.controls['alias_Reunion']
                                      .invalid &&
                                    formWhats.controls['alias_Reunion'].dirty
                                }"
                              />
                            </div>
                            <span
                              class="text-danger small"
                              *ngIf="
                                formWhats.controls['alias_Reunion'].invalid &&
                                formWhats.controls['alias_Reunion'].dirty
                              "
                              >Campo Requerido!</span
                            >
                          </div>

                          <div class="col-6">
                            <div class="input-group">
                              <div class="input-group-prepend">
                                <div class="input-group-text">
                                  <i class="fas fa-map-marker-alt"></i>
                                </div>
                              </div>
                              <input
                                type="text"
                                class="form-control"
                                formControlName="lugar_Reunion"
                                placeholder="Lugar de Reunión"
                                [ngClass]="{
                                  'is-invalid':
                                    formWhats.controls['lugar_Reunion']
                                      .invalid &&
                                    formWhats.controls['lugar_Reunion'].dirty
                                }"
                              />
                            </div>
                            <span
                              class="text-danger small"
                              *ngIf="
                                formWhats.controls['lugar_Reunion'].invalid &&
                                formWhats.controls['lugar_Reunion'].dirty
                              "
                              >Campo Requerido!</span
                            >
                          </div>
                        </div>
                        <div class="row mt-4">
                          <div class="col-6">
                            <div class="input-group">
                              <div class="input-group-prepend">
                                <div class="input-group-text">
                                  <i class="fas fa-calendar-alt"></i>
                                </div>
                              </div>
                              <input
                                type="date"
                                class="form-control"
                                formControlName="fecha_Reunion"
                                placeholder="Fecha de Reunión"
                                [ngClass]="{
                                  'is-invalid':
                                    formWhats.controls['fecha_Reunion']
                                      .invalid &&
                                    formWhats.controls['fecha_Reunion'].dirty
                                }"
                              />
                            </div>
                            <span
                              class="text-danger small"
                              *ngIf="
                                formWhats.controls['fecha_Reunion'].invalid &&
                                formWhats.controls['fecha_Reunion'].dirty
                              "
                              >Campo Requerido!</span
                            >
                          </div>
                          <div class="col-6">
                            <div class="input-group">
                              <div class="input-group-prepend">
                                <div class="input-group-text">
                                  <i class="fas fa-clock"></i>
                                </div>
                              </div>
                              <input
                                type="time"
                                class="form-control"
                                formControlName="hora_Reunion"
                                placeholder="Hora de Reunión"
                                [ngClass]="{
                                  'is-invalid':
                                    formWhats.controls['hora_Reunion']
                                      .invalid &&
                                    formWhats.controls['hora_Reunion'].dirty
                                }"
                              />
                            </div>
                            <span
                              class="text-danger small"
                              *ngIf="
                                formWhats.controls['hora_Reunion'].invalid &&
                                formWhats.controls['hora_Reunion'].dirty
                              "
                              >Campo Requerido!</span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                    <hr />
                    <div class="text-muted text-center" style="font-size: 11px">
                      Temas a Tratar
                    </div>
                    <div class="row mt-3">
                      <div class="col-lg-6">
                        <div class="text-muted">Escribe algo aquí</div>
                        <textarea
                          class="form-control"
                          #filterName
                          name="filterName"
                          formControlName="temas_Reunion"
                          rows="3"
                        ></textarea>
                        <button
                          [disabled]="!formWhats.valid"
                          class="btn btn-sm btn-success mt-2 float-right"
                          (click)="addAcuerdoCR()"
                        >
                          <i class="fas fa-plus"></i> Agregar
                        </button>
                      </div>

                      <div class="col-lg-6" *ngIf="cAcuerdos?.length > 0">
                        <div class="text-center scrollerOsqi2">
                          <ol>
                            <li
                              *ngFor="let cliente of cAcuerdos; let i = index"
                            >
                              <div
                                class="rounded bg-light p-1 text-center mt-3 elevation-1 col-12"
                                style="font-size: 12px"
                              >
                                <span
                                  style="hyphens: auto; word-break: break-all"
                                >
                                  {{ cliente.descripcion }}</span
                                >
                                <button
                                  type="button"
                                  class="close"
                                  (click)="deleteAcuerdoCR(i)"
                                >
                                  <span class="text-danger small"
                                    ><i class="far fa-trash-alt"></i
                                  ></span>
                                </button>
                              </div>
                            </li>
                          </ol>
                        </div>
                      </div>

                      <div class="col-lg-6" *ngIf="cAcuerdos?.length == 0">
                        <div class="alert alert-light text-center mt-2">
                          <i class="fas fa-info-circle"></i>¡Vaya! Aún no hay
                          temas a tratar !
                        </div>
                      </div>
                    </div>

                    <hr />
                    <div class="text-muted text-center" style="font-size: 11px">
                      Elige a tus invitados
                    </div>
                    <div class="row mt-5">
                      <div class="col-lg-2"></div>
                      <div class="col-lg-8">
                        <div class="input-group input-group-sm">
                          <input
                            type="search"
                            class="form-control"
                            placeholder="Busca un Invitado"
                            aria-label="Search"
                            style="font-size: 10px"
                            (input)="searchContact($event.target.value)"
                            maxlength="50"
                          />
                          <div class="input-group-prepend rounded">
                            <button
                              class="btn btn-sm btn-success"
                              data-toggle="modal"
                              data-target="#modal-lg"
                            >
                              <i class="fas fa-user-plus"></i> Contacto
                            </button>
                          </div>
                        </div>
                        <div
                          class="table-responsive table-responsive-lg table-responsive-md table-responsive-sm scrollerOsqi mt-3"
                          *ngIf="datosEjemplo.length > 0"
                        >
                          <table
                            class="table table-bordered table-hover table-sm small text-center"
                          >
                            <thead
                              style="background-color: #4385ef"
                              class="text-white"
                            >
                              <tr>
                                <td>
                                  <i class="fas fa-user-plus"></i> Invitado
                                </td>
                                <td><i class="fab fa-whatsapp"></i> Número</td>
                                <td>
                                  <i class="fas fa-plus-circle"></i> Selección
                                </td>
                              </tr>
                            </thead>
                            <tbody class="table-sm">
                              <tr
                                *ngFor="
                                  let dcheck of datosEjemplo;
                                  let ind = index
                                "
                              >
                                <td>{{ dcheck.nombre }}</td>
                                <td>{{ dcheck.numero }}</td>
                                <td>
                                  <div class="form-check">
                                    <input
                                      class="form-check-input"
                                      type="checkbox"
                                      [checked]="dcheck.envio"
                                      (click)="checkBoxEj(dcheck)"
                                    />
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                          <div *ngIf="!mostrar">
                            <button
                              class="btn btn-sm btn-success btn-sm"
                              style="float: right"
                              (click)="jh()"
                            >
                              <i class="fas fa-plus"> Marcar</i>
                            </button>
                          </div>

                          <div *ngIf="mostrar">
                            <button
                              class="btn btn-sm btn-success btn-sm"
                              style="float: right"
                              (click)="jh2()"
                            >
                              <i class="fas fa-minus"> Desmarcar</i>
                            </button>
                          </div>
                        </div>
                        <div class="alert alert-light" *ngIf="datosEjemplo.length == 0">
                          <i class="fa fa-address-book" aria-hidden="true"></i> ¡Vaya! Aún no se han agregado contactos.
                      </div>
                      </div>
                      <br />
                      <div class="col-lg-2"></div>
                    </div>

                    <div class="text-center mt-5">
                      <button
                      *ngIf="!loadBtnMinuta"
                        type="button"
                        class="btn btn-sm btn-primary text-white ml-5"
                        [disabled]="cAcuerdos.length == 0 || valiarChe()"
                        (click)="dSeleccionado()"
                        style="width: 150px"
                      >
                        Enviar
                      </button>
                      <button *ngIf="loadBtnMinuta" class="btn btn-sm btn-primary"
                      style="width: 180px;" type="button" disabled>
                      <span class="spinner-border spinner-border-sm" role="status"
                          aria-hidden="true"></span>
                      Enviando Mensaje...
                  </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <!-- <pre>{{ this.newRe | json }}</pre> -->
      </div>

      <!--wrapper-->
    </div>
    <!--c-wrapper-->
  </div>
 
  <!--wrapper-->
  <!--primer div-->
  <!-----------------------------------------------------------------------------------MODAL1----------------------------------------------------------------------------------------------------------------------------------------->
  <div class="modal" id="modal-lg">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header bg-gradient-primary form-inline">
          <div><i class="fas fa-list"></i> Agrega un Nuevo Contacto</div>
          <button
            type="button"
            class="close text-white"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <form [formGroup]="formAgenda">
            <div class="row">
              <div class="col-lg-2"></div>
              <div class="input-group col-lg-8">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="fas fa-user"></i>
                  </div>
                </div>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Nombre Completo"
                  formControlName="Nombre_Completo"
                />
              </div>
              <div class="col-lg-2"></div>
            </div>
            <div class="row mt-4">
              <div class="col-lg-2"></div>
              <div class="input-group col-lg-8">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="fas fa-phone"></i>
                  </div>
                </div>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Lada + 10 dígitos"
                  maxlength="12"
                  formControlName ="Celular"               
                />              
              </div>
              <span  class="text-danger small" *ngIf="formAgenda.controls['Celular'].hasError('maxlength')">
                El teléfono no puede superar los 12 caracteres.
            </span>

              <div class="col-lg-2"></div>
            </div>
            <div class="row mt-4">
              <div class="col-lg-2"></div>
              <div class="input-group col-lg-8">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i class="fas fa-users"></i>
                  </div>
                </div>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Rol"
                  formControlName="rol"
                />
              </div>
              <div class="col-lg-2"></div>
            </div>
            <hr />
            <div class="text-center mt-3">
              <button
              [disabled]="!formAgenda.valid"
                type="button"
                class="btn btn-sm btn-primary text-white"
                style="width: 150px"
                (click)="createAgenda()"
              >
                Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

